@using System.Web.Optimization
@model Potatotech.GestaoRestaurante.Web.ViewModels.PedidoViewModel
@{
    ViewBag.Title = "Pedido";
}

<div class="row" ng-app="restaurante.garcom" ng-controller="pedido-controller">
    <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel">
            <div class="x_title">
                <h2>Novo Pedido</h2>

                <div class="clearfix"></div>
            </div>
            <div class="x_content">
                <br>
                <form id="demo-form2" class="form-horizontal form-label-left">
                    <div class="row">

                        <div class="form-group">
                            <div class="col-md-6 col-sm-6 col-xs-4">
                                <input type="text" id="mesa" ng-model="pedido.mesa" placeholder="Mesa" class="form-control">
                            </div>
                            <div class="col-md-6 col-sm-6 col-xs-6 pull-right normalize">
                                <div class="input-group">
                                    <span class="input-group-btn">
                                        <button ng-click="qtd = qtd - 1" class="btn btn-primary">-</button>
                                    </span>
                                    <input type="number" ng-model="qtd" class="form-control">
                                    <span class="input-group-btn">
                                        <button ng-click="qtd = qtd + 1" class="btn btn-primary">+</button>
                                    </span>


                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col sm-12">

                                <ui-select class="dynamic-select" ng-model="select2.ProdutoAtual">
                                    <ui-select-match>
                                        <span ng-bind="$select.selected.descricao"></span>
                                    </ui-select-match>
                                    <ui-select-choices repeat="produto in (produtos | filter: $select.search) track by produto.id">
                                        <span ng-bind="produto.descricao"></span>
                                    </ui-select-choices>
                                </ui-select>
                            </div>

                        </div>
                    </div>


                    <div class="row">
                        <div class="form-group">
                            <div class="col-xs-12">
                                <button class="btn btn-primary btn-block" ng-click="adicionarProduto(produtoAtual)">Adicionar Produto</button>
                            </div>
                        </div>
                    </div>




                    <div class="row">
                        <div class="col-xs-12">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Cod</th>
                                        <th>Descrição</th>
                                        <th>Qtd</th>
                                        <th>R$</th>
                                    </tr>
                                </thead>
                                <tbody ng-repeat="p in pedido.produtos track by $index">
                                    <tr>
                                        <td>{{ p.id }}</td>
                                        <td>{{ p.descricao }}</td>
                                        <td>{{ p.quantidade }}</td>
                                        <td>{{ p.preco }}</td>
                                    </tr>
                                </tbody>


                            </table>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">
                            <button type="submit" class="btn btn-primary">Cancel</button>
                            <button type="submit" class="btn btn-success">Submit</button>
                        </div>
                    </div>


                </form>
            </div>
        </div>
    </div>
</div>

@section Stylesheets
{
    <link rel="stylesheet" href="/Content/select.min.css" />
}

@section Scripts
{
    @Scripts.Render("/Scripts/angular.min.js")
    @Scripts.Render("/Scripts/angular-sanitize.min.js")
    @Scripts.Render("/Scripts/select.min.js")
    @Scripts.Render("/Scripts/AngularApp/pedido.js")
}

